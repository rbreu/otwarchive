<div id="translation_module" class="section_box colored" style="display:none">
	<div style="font-size:17px;padding-bottom:3px;font-weight:bold;">
	  <%=trla("Translation for {language} Language", "", :language => tr8n_current_language.native_name)%>
	</div>
	
	<% form_for(:translation, @translation, :url => {:controller => "/tr8n/translations", :action => :translate}, :html => {:id => 'translation_form', :method => :post}) do |f| %>
		  <%= hidden_field_tag(:translation_id, @translation.id) %>
		  <%= hidden_field_tag(:new_translation, (@translation.id == nil).to_s ) %>
		  <%= hidden_field_tag(:translation_key_id, @translation_key.id) %>
		  <%= hidden_field_tag(:translation_has_dependencies, "false") %>
		  <%= hidden_field_tag(:section_key, @section_key) %>
		  
			<div style="padding-bottom:10px;">  
		    <%= f.text_area(:label, :id => "tr8n_translation_label_#{@translation_key.id}", :style=>"width:99%;height:60px;border:1px solid #ccc;background-color:white;padding:3px;", :class => "keyboardInput" ) %>
		  </div>
			
		  <% if @translation_key.translation_tokens? or tr8n_current_language.has_rules? %>
          <%= render(:partial => "tokens") %>
			<% end %>			
			
		  <div id="buttons_container" style="padding-top:5px;padding-bottom:5px;text-align:center">
		      <button type="submit" class="translator_btn translator_submit_btn" onClick="submitTranslation(); return false;">
		          <span><%=trla("Translate")%></span>
		      </button>
		      <%=trla("or")%> <%= link_to_function(trla("Cancel"), "viewTranslations()") %>
		  </div>
	
	<% end %>
</div>

<script>
	function submitTranslation() {
		if (Tr8n.value("tr8n_translation_label_<%=@translation_key.id%>") == "") {
			 alert("<%=trla('Translation must be provided.')%>");
			 return;
	  }
    Tr8n.Effects.submit('translation_form');
	}
	
</script>
